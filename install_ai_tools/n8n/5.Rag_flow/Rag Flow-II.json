{
  "name": "Rag Flow-II",
  "nodes": [
    {
      "parameters": {
        "options": {
          "allowFileUploads": true
        }
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.1,
      "position": [
        -688,
        80
      ],
      "id": "8a0d1cdd-dcf5-422e-8009-66c810855a8f",
      "name": "When chat message received",
      "webhookId": "2c31f2d6-26b5-45d9-b8be-81ba2494b864"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are a helpful assistant. You answer questions on scores of students and not from your own training data."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.1,
      "position": [
        -384,
        80
      ],
      "id": "285f27d8-91da-47fb-a149-b3e810dd4c29",
      "name": "AI Agent"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -256,
        288
      ],
      "id": "449ff3da-6b63-428c-a408-4c3b45eaceed",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "model": "nomic-embed-text:latest"
      },
      "type": "@n8n/n8n-nodes-langchain.embeddingsOllama",
      "typeVersion": 1,
      "position": [
        -352,
        544
      ],
      "id": "2d695ec9-a0ff-467c-ab33-f1f97d450381",
      "name": "Embeddings Ollama",
      "credentials": {
        "ollamaApi": {
          "id": "jL4Db89W12xJHqA4",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "pineconeIndex": {
          "__rl": true,
          "value": "n8n-index",
          "mode": "list",
          "cachedResultName": "n8n-index"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.vectorStorePinecone",
      "typeVersion": 1.3,
      "position": [
        -144,
        432
      ],
      "id": "deba4f83-d13a-441f-8b7f-e94f7ca2f4dd",
      "name": "Pinecone Vector Store1",
      "credentials": {
        "pineconeApi": {
          "id": "wKiDBXguDxffcJKO",
          "name": "PineconeApi account"
        }
      }
    },
    {
      "parameters": {
        "content": "## Questions\n1. This question fails:\n    Who scored the max quiz marks?\n    Possibly the query is compared with data in vector store and 10 matching results are taken out. The LLM then compares marks from among 10 and gives the reply. Try to load this data in csv format to get proper answer.\n2. These questions succeed:\n     What are the scores of Edgar in Quiz?\n     Compare the scores of Edgar with that of Rudolph.",
        "height": 240,
        "width": 672
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -1088,
        288
      ],
      "id": "ab4600a6-0ef6-4ff4-9e8c-b3cba57f6396",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "content": "## Embedding\nnomic-embed-text: Dimension: 768. Keep the vectors of same dimension.",
        "height": 128
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        -640,
        544
      ],
      "id": "93af57ff-d3dc-496d-8ccd-db325ee807c8",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Tool Agent Description\nYou answer questions regarding scores of students in exam, quiz and homework.",
        "height": 112,
        "width": 416
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -48,
        576
      ],
      "typeVersion": 1,
      "id": "ccc10348-4796-4545-a660-ffb39a980cab",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "content": "## AI Agent System Message:\nYou are a helpful assistant. You answer questions on scores of students and not from your own training data.",
        "height": 128,
        "width": 368
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        48,
        64
      ],
      "typeVersion": 1,
      "id": "0da99c28-ed67-43fc-87e3-04778ab0cde8",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "description": "You answer questions regarding scores of students in exam, quiz and homework."
      },
      "type": "@n8n/n8n-nodes-langchain.toolVectorStore",
      "typeVersion": 1.1,
      "position": [
        -48,
        240
      ],
      "id": "7007af98-ff50-4f71-bf47-29509b51246e",
      "name": "Tool Agent"
    },
    {
      "parameters": {
        "model": "llama3.2:latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmOllama",
      "typeVersion": 1,
      "position": [
        144,
        448
      ],
      "id": "934e30e7-6c15-4c58-9706-640c9e5ff89b",
      "name": "Ollama llama3.2",
      "credentials": {
        "ollamaApi": {
          "id": "jL4Db89W12xJHqA4",
          "name": "Ollama account"
        }
      }
    },
    {
      "parameters": {
        "model": "mistral-nemo:latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOllama",
      "typeVersion": 1,
      "position": [
        -384,
        304
      ],
      "id": "1c035e1e-661a-4a48-aa90-8060600aad35",
      "name": "Ollama mistral-nemo Chat Model",
      "credentials": {
        "ollamaApi": {
          "id": "jL4Db89W12xJHqA4",
          "name": "Ollama account"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Embeddings Ollama": {
      "ai_embedding": [
        [
          {
            "node": "Pinecone Vector Store1",
            "type": "ai_embedding",
            "index": 0
          }
        ]
      ]
    },
    "Pinecone Vector Store1": {
      "ai_vectorStore": [
        [
          {
            "node": "Tool Agent",
            "type": "ai_vectorStore",
            "index": 0
          }
        ]
      ]
    },
    "Tool Agent": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Ollama llama3.2": {
      "ai_languageModel": [
        [
          {
            "node": "Tool Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Ollama mistral-nemo Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8516b76f-6d39-4794-b9cd-46dfc0ed7456",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "f1027d49a7ef6d9ac562287b0b90e30a8bac1723da6e5e61702bbfdb763f34e9"
  },
  "id": "e2wUmTFp7trMd6n3",
  "tags": []
}